import { o as o$1 } from '../../../chunks/index-7b8f310d.js';
import '../../../chunks/browser-polyfill-f636ce7e.js';

async function t({query:n,variables:t,headers:e}){const i=await fetch("https://mothertree.truffle.vip/graphql",{method:"POST",headers:Object.assign({"Content-Type":"application/json"},e),body:JSON.stringify({query:n,variables:t})}),o=await i.json();return {data:o.data,errors:o.errors}}function e(n,{onAdded:t,onRemoved:e}){const o=new MutationObserver((o=>{for(const a of o)if("childList"===a.type){const o=i(n,a.addedNodes),c=i(n,a.removedNodes);o&&(null==t||t(o)),c&&(null==e||e(c));}}));return o.observe(document.body,{childList:!0,subtree:!0}),o}function i(n,t){for(const e of t){if(e.nodeType===Node.ELEMENT_NODE&&e.matches(n))return e;const t=e.nodeType===Node.ELEMENT_NODE&&e.querySelector(n);if(t)return t}}const o="\n  :host {\n    container-type: size;\n    min-height: 80px;\n    cursor: pointer;\n  }\n\n  :host svg {\n    display: block;\n  }\n\n  :host > .quick-action {\n    box-sizing: border-box;\n    height: 100%;\n\n    padding: 12px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    align-items: flex-start;\n\n    border-radius: 4px;\n    background: #F357A1;\n    transition: opacity 0.2s ease-in-out;\n  }\n\n  :host > .quick-action:hover {\n    opacity: 0.8;\n  }\n\n  :host > .quick-action > .pig-icon {\n    width: 30px;\n    height: 30px;\n  }\n    \n  :host > .quick-action > .bottom {\n    display: flex;\n    height: 34px;\n    justify-content: space-between;\n    align-items: flex-end;\n    gap: 12px;\n    flex-shrink: 0;\n    align-self: stretch;\n  }\n\n  :host > .quick-action > .bottom > .text {\n    color: #FFF;\n    font-family: Inter, Roboto, sans-serif;\n    font-size: 14px;\n    font-style: normal;\n    font-weight: 700;\n    line-height: normal;\n  }\n\n  @container (max-width: 130px) {\n    :host > .quick-action {\n      align-items: center;\n      justify-content: center;\n    }\n\n    :host > .quick-action > .bottom {\n      display: none;\n    }\n\n    :host > .quick-action > .pig-icon {\n      width: 40px;\n      height: 40px;\n    }\n  }\n",a='<div class="quick-action">\n  <svg xmlns="http://www.w3.org/2000/svg" class="pig-icon" viewBox="0 0 30 30" fill="none">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M2.53025 13.3508C3.12372 13.7089 3.73082 13.9833 4.29384 14.1209C4.88407 14.2652 5.57658 14.2937 6.11512 13.9078C6.86358 13.3715 7.19113 12.7402 7.30427 12.0577C7.35713 11.7389 7.36132 11.4219 7.35567 11.131C7.35325 11.0061 7.34931 10.891 7.3455 10.7796L7.3455 10.7795L7.34548 10.7788C7.33975 10.6114 7.33432 10.4525 7.33432 10.2761C7.33432 9.9062 7.03528 9.6055 6.66536 9.6055C6.29543 9.6055 5.99639 9.9062 5.99639 10.2761C5.99639 10.4685 6.00313 10.6717 6.00924 10.8558L6.00928 10.857C6.01288 10.9654 6.01624 11.0669 6.01799 11.1571C6.02316 11.4235 6.01685 11.6423 5.98444 11.8378C5.92705 12.184 5.78501 12.4957 5.33708 12.8167C5.27705 12.8597 5.07189 12.9306 4.61079 12.8179C4.17677 12.7118 3.64099 12.4705 3.07129 12.1095C1.92751 11.3849 0.780856 10.264 0.163846 9.10345L0.164881 9.10521L0.164456 9.10306C0.160914 9.08832 0.138698 8.99585 0.186708 8.76837C0.239673 8.5174 0.359485 8.19164 0.549077 7.80397C0.92655 7.03213 1.53149 6.1136 2.22739 5.22528C2.92208 4.3385 3.68684 3.50804 4.36988 2.90657C4.71224 2.60509 5.02025 2.37343 5.27767 2.22098C5.55492 2.05678 5.69618 2.03125 5.7261 2.03125C5.82389 2.03125 5.98353 2.08224 6.20855 2.30318C6.43085 2.52145 6.65492 2.84704 6.86684 3.24249C7.28916 4.03057 7.59304 4.96219 7.72744 5.47457C7.82132 5.83245 8.18702 6.04696 8.54478 5.95251C8.90236 5.85811 9.11522 5.49117 9.02139 5.13347C8.97742 4.96587 8.91755 4.75841 8.84262 4.52594C10.6658 3.51001 12.7658 2.93119 15.001 2.93119C17.2736 2.93119 19.4065 3.52953 21.2507 4.57727C21.1309 4.92298 21.0395 5.23166 20.9786 5.46385C20.8848 5.82155 21.0976 6.18849 21.4552 6.28289C21.813 6.37734 22.1787 6.16283 22.2725 5.80494C22.407 5.29257 22.7108 4.36094 23.1331 3.57287C23.3451 3.17742 23.5691 2.85182 23.7914 2.63355C24.0165 2.41261 24.1761 2.36163 24.2739 2.36163C24.3038 2.36163 24.4451 2.38716 24.7223 2.55135C24.9797 2.70381 25.2877 2.93547 25.6301 3.23695C26.3132 3.83842 27.0779 4.66887 27.7726 5.55565C28.4685 6.44398 29.0734 7.36251 29.4509 8.13435C29.6405 8.52202 29.7603 8.84778 29.8133 9.09874C29.8613 9.32623 29.8391 9.4187 29.8355 9.43344L29.8351 9.43559L29.8361 9.43383C29.2191 10.5944 28.0725 11.7152 26.9287 12.4399C26.359 12.8009 25.8232 13.0421 25.3892 13.1482C24.9281 13.2609 24.7229 13.1901 24.6629 13.147C24.215 12.8261 24.0729 12.5143 24.0156 12.1682C23.9831 11.9727 23.9768 11.7539 23.982 11.4875C23.9837 11.3973 23.9871 11.2958 23.9907 11.1874L23.9908 11.1862V11.1861V11.1861C23.9969 11.002 24.0036 10.7988 24.0036 10.6065C24.0036 10.2366 23.7046 9.93587 23.3346 9.93587C22.9647 9.93587 22.6657 10.2366 22.6657 10.6065C22.6657 10.7829 22.6602 10.9418 22.6545 11.1092L22.6545 11.1098L22.6545 11.1101L22.6545 11.1103C22.6507 11.2216 22.6467 11.3366 22.6443 11.4614C22.6387 11.7523 22.6429 12.0692 22.6957 12.3881C22.8089 13.0706 23.1364 13.7018 23.8849 14.2381C24.4234 14.6241 25.1159 14.5955 25.7062 14.4513C26.2856 14.3096 26.9117 14.0231 27.5217 13.6496C27.62 14.2857 27.6711 14.9375 27.6711 15.6012C27.6711 22.5987 21.9985 28.2713 15.001 28.2713C8.00356 28.2713 2.33099 22.5987 2.33099 15.6012C2.33099 14.8332 2.39932 14.0811 2.53025 13.3508Z" fill="white"/>\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M21.8857 21.2966C21.8857 23.4375 18.7847 23.4375 14.9594 23.4375C11.1341 23.4375 8.03311 23.4375 8.03311 21.2966C8.03311 17.8191 11.1341 15 14.9594 15C18.7847 15 21.8857 17.8191 21.8857 21.2966ZM14.0435 19.717C14.0435 20.8395 13.299 21.7494 12.3807 21.7494C11.4623 21.7494 10.7178 20.8395 10.7178 19.717C10.7178 18.5946 11.4623 17.6847 12.3807 17.6847C13.299 17.6847 14.0435 18.5946 14.0435 19.717ZM17.3664 21.7494C18.2848 21.7494 19.0292 20.8395 19.0292 19.717C19.0292 18.5946 18.2848 17.6847 17.3664 17.6847C16.448 17.6847 15.7035 18.5946 15.7035 19.717C15.7035 20.8395 16.448 21.7494 17.3664 21.7494Z" fill="#FC8AC0"/>\n</svg>\n  <div class="bottom">\n\t<div class="text">\n    \tTruffle quick actions\n    </div>\n    <div class="icon">\n      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">\n  <path d="M4.33334 3.66663V4.99996H10.06L3.66667 11.3933L4.60667 12.3333L11 5.93996V11.6666H12.3333V3.66663H4.33334Z" fill="white"/>\n</svg>\n    </div>\n  </div>\n</div>';function c(){const n=document.createElement("div");n.classList.add("truffle-quick-action-container");const t=o.replace(/:host/g,".truffle-quick-action-container");return n.innerHTML=`\n    <style>\n      ${t}\n    </style>\n    ${a}\n  `,n}const s="\n  query ExtensionChannelQuery(\n    $contentPageType: String!\n    $contentPageOwnerRef: String!\n  ) {\n    channel (input: {\n      contentPageType: $contentPageType\n      contentPageOwnerRef: $contentPageOwnerRef\n    }) {\n      orgId\n    }\n  }\n";o$1.settings.get("experimental").then((i=>{i&&(window.location.href.includes("twitch.tv")?async function(){var i,o,a;const l=await o$1.auth.get("accessToken");if(!l)return;const d=null===(i=/\/u\/([^\/]*)\/?/.exec(window.location.pathname))||void 0===i?void 0:i[1];if(!d)return;const r=await t({headers:{"x-access-token":l},query:s,variables:{contentPageType:"twitch",contentPageOwnerRef:d}}),u=null===(a=null===(o=null==r?void 0:r.data)||void 0===o?void 0:o.channel)||void 0===a?void 0:a.orgId;if(!u)return;const h=`https://app.truffle.vip/quick-actions/${u}`,p=c();p.addEventListener("click",(()=>{window.open(h,"_blank","width=500,height=600,top=100,left=100");})),e(".quick-actions",{onAdded(n){n.prepend(p);}});}():window.location.href.includes("youtube.com")&&async function(){var i,o,a,l,d,r,u,h;const p=await o$1.auth.get("accessToken");if(!p)return;let C=null!==(a=null===(o=null===(i=window.location.pathname)||void 0===i?void 0:i.match(/\/channel\/([^/]+)/))||void 0===o?void 0:o[1])&&void 0!==a?a:null;if(!C){const n=null!==(r=null===(d=null===(l=window.location.pathname)||void 0===l?void 0:l.match(/\/video\/([^/]+)/))||void 0===d?void 0:d[1])&&void 0!==r?r:null;if(!n)return;const t=await fetch(`https://platform-chat-api.truffle.vip/v/${n}`),e=await t.json();C=null==e?void 0:e.channelId;}if(!C)return;const f=await t({headers:{"x-access-token":p},query:s,variables:{contentPageType:"youtube",contentPageOwnerRef:C}}),v=null===(h=null===(u=null==f?void 0:f.data)||void 0===u?void 0:u.channel)||void 0===h?void 0:h.orgId;if(!v)return;const g=`https://app.truffle.vip/quick-actions/${v}`,w=document.createElement("li");w.style.padding="7%";const y=c();w.appendChild(y),y.addEventListener("click",(()=>{window.open(g,"_blank","width=500,height=600,top=100,left=100");})),e("#left-nav #bottom-section",{onAdded(n){n.prepend(w);}});}());}));

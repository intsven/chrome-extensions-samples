import { r } from './browser-polyfill-f636ce7e.js';

var t={auth:{token:void 0,accessToken:void 0,savedAnonAccessToken:void 0,packageInstallAccessTokens:{}},twitch:{headers:{}},newTab:{pinnedChannelsExperimental:[],topSites:[],hideTopSitesRequest:!1,lateOptOutState:!1},settings:{theaterMode:!0,chatBatching:!0,chatStyles:!0,experimental:!1,experimentalSidebar:!1,newTabExperimental:!1,newTabOnboarded:!1,twitchFollowing:!0,hideEmojiFountain:!1},cache:{},watchedChannels:{channels:[]},packageInstallStorage:{},embed:{devEmbeds:{}},sidebar:{hasViewedSidebarLocationTooltip:!1,config:{}}},a=r.storage.local,n=Object.fromEntries(Object.keys(t).map((e=>[e,new Set])));r.storage.onChanged.addListener(((e,t)=>{if("local"!==t)return;let a={};for(let t in e){let n=t.split("."),i=n[0],o=n[1];a[i]||(a[i]={}),a[i][o]=e[t].newValue;}for(let e in n)if(a[e])for(let t of n[e].values())t.callback(a[e]);}));var i=e=>({get:async function(n){let i=`${e}.${String(n)}`,o=await a.get(i).then((e=>e[i]));return void 0===o?t[e][n]:o},set:async function(t,n){let i=`${e}.${String(t)}`;await a.set({[i]:n});},remove:async function(t){let n=`${e}.${String(t)}`;await a.remove(n);},subscribe:function(t){let a={callback:t,unsubscribe:()=>{n[e]?.delete(a);}};return n[e]?.add(a),a}}),o=Object.fromEntries(Object.keys(t).map((e=>[e,i(e)])));

export { o };

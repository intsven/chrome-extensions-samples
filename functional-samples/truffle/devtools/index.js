import { p as p$1, t } from '../chunks/style-inject.es-689a5504.js';
import { n, U } from '../chunks/index-41475b1d.js';
import { o as o$1 } from '../chunks/storage-af31cd6f.js';
import { v as v$1, y as y$1, m as m$1, x as x$1 } from '../chunks/react-c4f3dfbf.js';
import { o, c } from '../chunks/index-a34e90a0.js';
import '../chunks/browser-polyfill-f636ce7e.js';

const p=new Set(["input","textarea","select"]),x={value:{handler:"onChange",getValue:e=>e.target.value,defaultValue:""}},h=Object.assign({checked:{handler:"onChange",getValue:e=>e.target.checked}},x),u=new Proxy({},{get(e,t){if(!e[t]){const r=n.exports.forwardRef(((e,r)=>{const n$1={...e};return !r||!o(r)&&c(r)||(n$1.ref=r),n.exports.createElement(t,n$1)}));e[t]=v$1(r,p.has(t)?"input"===t?h:x:void 0);}return e[t]}}),j=async()=>await o$1.auth.get("packageInstallAccessTokens"),b=e=>o$1.auth.set("packageInstallAccessTokens",e);var m=y$1((()=>{var t$1;const s=m$1(j),r={packageInstallId:"",token:""},n=m$1(r),o=m$1(!1),a=x$1((()=>o.get()?"text":"password")),d=(e,t)=>{s.set((s=>Object.assign(Object.assign({},s),{[e]:t}))),b(s.peek());};return t.exports.jsxs("table",{className:"c-auth-token-table",children:[t.exports.jsx("thead",{children:t.exports.jsxs("tr",{children:[t.exports.jsx("th",{children:"Package Install ID"}),t.exports.jsx("th",{children:"Token"}),t.exports.jsx("th",{style:{textAlign:"left"},children:t.exports.jsx("button",{onClick:()=>{o.set((e=>!e));},children:o.get()?"Hide":"Show"})})]})}),t.exports.jsxs("tbody",{children:[Object.entries(null!==(t$1=s.get())&&void 0!==t$1?t$1:{}).map((([t$1])=>t.exports.jsxs("tr",{children:[t.exports.jsx("td",{children:t$1}),t.exports.jsx("td",{children:t.exports.jsx(u.input,{value$:s[t$1],type$:a})}),t.exports.jsxs("td",{children:[t.exports.jsx("button",{onClick:()=>d(t$1,s[t$1].peek()),children:"Set"}),t.exports.jsx("button",{onClick:()=>{return e=t$1,s.set((t=>{const s=Object.assign({},t);return delete s[e],s})),void b(s.peek());var e;},children:"Delete"})]})]},t$1))),t.exports.jsxs("tr",{children:[t.exports.jsx("td",{children:t.exports.jsx(u.input,{value$:n.packageInstallId,placeholder:"00000000-0000-0000-0000-000000000000"})}),t.exports.jsx("td",{children:t.exports.jsx(u.input,{value$:n.token,type$:a,placeholder:"token"})}),t.exports.jsx("td",{children:t.exports.jsx("button",{onClick:()=>{const{packageInstallId:e,token:t}=n.peek();d(e,t),n.set(r);},children:"Add"})})]})]})]})}));function g(){return t.exports.jsxs("div",{className:"c-auth-token-table-wrapper",children:[t.exports.jsx("h2",{children:"Auth tokens"}),t.exports.jsx("p",{children:"Each configured package-install can access a package-install-scoped auth token."}),t.exports.jsx(m,{})]})}var k="table-module_c-dev-embed-table__-9bi2";p$1(".table-module_c-dev-embed-table__-9bi2 {\n  padding: 6px;\n  border: solid 1px white;\n  border-radius: 4px;\n}\n\n.table-module_c-dev-embed-table__-9bi2 > tbody {\n  padding: 6px;\n  border: solid 1px white;\n  border-radius: 4px;\n}\n");const f={url:"http://localhost:8080",authToken:"AUTH_TOKEN",contentPageType:"youtubeVideo",parentQuerySelector:"#above-the-fold",defaultStyles:{width:"100%",height:"300px"}},v=e=>{try{return JSON.parse(e),!1}catch(e){return e instanceof Error?e.message:"An unknown error occurred"}};var y=y$1((()=>{var t$1;const s=m$1(O),r=m$1(JSON.stringify(f,null,2)),n=()=>{w(s.peek());};return t.exports.jsxs("table",{className:k,children:[t.exports.jsx("thead",{children:t.exports.jsx("tr",{children:t.exports.jsx("th",{children:"Embed Config"})})}),t.exports.jsxs("tbody",{children:[Object.entries(null!==(t$1=s.get())&&void 0!==t$1?t$1:{}).map((([t$1])=>t.exports.jsxs("tr",{children:[t.exports.jsxs("td",{children:[t.exports.jsxs("p",{children:[t.exports.jsx("strong",{children:"Embed ID: "}),t$1]}),t.exports.jsx(u.textarea,{rows:10,cols:40,value$:s[t$1]})]}),t.exports.jsxs("td",{children:[t.exports.jsx("button",{onClick:n,children:"Save"}),t.exports.jsx("button",{onClick:()=>(e=>{s.set((t=>{const s=Object.assign({},t);return delete s[e],s})),n();})(t$1),children:"Delete"})]})]},t$1))),t.exports.jsxs("tr",{children:[t.exports.jsxs("td",{children:[t.exports.jsx("h4",{children:"New embed"}),t.exports.jsx(u.textarea,{rows:10,cols:40,value$:r}),t.exports.jsx("p",{children:v(r.get())})]}),t.exports.jsx("td",{children:t.exports.jsx("button",{onClick:()=>{let e=!1;s.set((t=>{const s=Object.assign({},t),n=`dev-${crypto.randomUUID()}`;s[n]=r.peek();try{return JSON.parse(s[n]),s}catch(s){return e=!0,alert("Error adding embed. Please input valid JSON."),t}})),e||(w(s.peek()),r.set(JSON.stringify(f,null,2)));},children:"Add"})})]})]})]})}));async function O(){const e=await o$1.embed.get("devEmbeds"),t=Object.entries(e).map((([e,t])=>[e,JSON.stringify(t,null,2)]));return Object.fromEntries(t)}async function w(e){let t=!1;const s=Object.entries(e).map((([e,s])=>{try{return [e,JSON.parse(s)]}catch(s){return t=!0,alert(`Error saving ${e}. Please input valid JSON.`),[e,{}]}}));if(t)return;const r=Object.fromEntries(s);return await o$1.embed.set("devEmbeds",r)}function _(){return t.exports.jsxs("div",{className:"c-dev-embed-table-wrapper",children:[t.exports.jsx("h2",{children:"Dev Embeds"}),t.exports.jsx("p",{children:"Manage your dev embeds here."}),t.exports.jsx(y,{})]})}var N="app-module_c-app__JGVvb";p$1(".app-module_c-app__JGVvb {\n  font-family: sans-serif;\n  background: black;\n  color: white;\n}\n");const E=document.getElementById("root");E&&U.exports.render(t.exports.jsx((function(){return t.exports.jsxs("div",{className:N,children:[t.exports.jsx("h1",{children:"Truffle Devtools"}),t.exports.jsx(g,{}),t.exports.jsx(_,{})]})}),{}),E);
